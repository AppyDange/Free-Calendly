<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenCal - Schedule a Meeting</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        /* Custom scrollbar for time slots */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        /* Calendar Styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-10">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 cursor-pointer" onclick="resetApp()">
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold">O</div>
                <h1 class="text-xl font-semibold text-gray-900">OpenCal</h1>
            </div>
            <nav class="hidden md:flex gap-6 text-sm font-medium text-gray-500">
                <a href="#" class="hover:text-gray-900">Home</a>
                <a href="#" class="hover:text-gray-900">Availability</a>
                <a href="#" class="hover:text-gray-900">Integrations</a>
            </nav>
            <div class="flex items-center gap-4">
                <button class="text-sm font-medium text-gray-500 hover:text-gray-900">Log In</button>
            </div>
        </div>
    </header>
    <!-- Main Content Area -->
    <main id="app" class="flex-grow flex items-center justify-center p-4 sm:p-8">
        <!-- Content will be injected here by JS -->
    </main>
    <footer class="bg-white border-t border-gray-200 py-6 mt-auto">
        <div class="max-w-5xl mx-auto px-4 text-center text-sm text-gray-500">
            &copy; 2023 OpenCal Inc. All rights reserved.
        </div>
    </footer>
    <script>
        // State Management
        const state = {
            view: 'event-types', // event-types, calendar, form, success
            selectedEvent: null,
            selectedDate: null,
            selectedTime: null,
            currentMonth: new Date().getMonth(),
            currentYear: new Date().getFullYear()
        };
        // Mock Data
        const eventTypes = [
            {
                id: 1,
                title: "15 Minute Meeting",
                duration: "15 min",
                type: "One-on-One",
                color: "bg-purple-500",
                description: "Quick sync to touch base."
            },
            {
                id: 2,
                title: "30 Minute Meeting",
                duration: "30 min",
                type: "One-on-One",
                color: "bg-blue-500",
                description: "Standard meeting time for discussion."
            },
            {
                id: 3,
                title: "60 Minute Strategy",
                duration: "60 min",
                type: "One-on-One",
                color: "bg-green-500",
                description: "Deep dive into strategy and planning."
            }
        ];
        // Helper to format date
        const getMonthName = (monthIndex) => {
            const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            return months[monthIndex];
        };
        // Render Functions
        const renderApp = () => {
            const app = document.getElementById('app');
            app.innerHTML = ''; // Clear current content
            if (state.view === 'event-types') {
                renderEventTypes(app);
            } else if (state.view === 'calendar') {
                renderCalendarView(app);
            } else if (state.view === 'form') {
                renderBookingForm(app);
            } else if (state.view === 'success') {
                renderSuccess(app);
            }
        };
        const renderEventTypes = (container) => {
            // Profile Section
            const wrapper = document.createElement('div');
            wrapper.className = "w-full max-w-5xl mx-auto fade-in";
            
            let html = `
                <div class="text-center mb-12">
                    <div class="w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl text-gray-500">ðŸ‘¤</div>
                    <h2 class="text-2xl font-bold text-gray-900">Jane Doe</h2>
                    <p class="text-gray-500 mt-2">Welcome to my scheduling page. Please follow the instructions to add an event to my calendar.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            `;
            eventTypes.forEach(event => {
                html += `
                    <div onclick="selectEvent(${event.id})" class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md hover:border-blue-400 transition-all cursor-pointer group">
                        <div class="h-2 w-full ${event.color} rounded-full mb-4 opacity-20 group-hover:opacity-100 transition-opacity"></div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-1">${event.title}</h3>
                        <p class="text-sm text-gray-500 mb-4">${event.duration}, ${event.type}</p>
                        <div class="flex items-center text-blue-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                            Select <span class="ml-1">&rarr;</span>
                        </div>
                    </div>
                `;
            });
            html += `</div>`;
            wrapper.innerHTML = html;
            container.appendChild(wrapper);
        };
        const renderCalendarView = (container) => {
            const wrapper = document.createElement('div');
            wrapper.className = "bg-white rounded-lg shadow-lg border border-gray-200 w-full max-w-4xl flex flex-col md:flex-row overflow-hidden fade-in min-h-[600px]";
            
            // Left Sidebar (Event Details)
            const sidebar = `
                <div class="w-full md:w-1/3 bg-white border-b md:border-b-0 md:border-r border-gray-200 p-8">
                    <button onclick="resetApp()" class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 mb-6">
                        &larr;
                    </button>
                    <p class="text-gray-500 text-sm font-medium mb-1">Jane Doe</p>
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">${state.selectedEvent.title}</h2>
                    <div class="flex items-center text-gray-500 text-sm mb-2">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        ${state.selectedEvent.duration}
                    </div>
                    <div class="flex items-center text-gray-500 text-sm mb-6">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        Web conferencing details provided upon confirmation.
                    </div>
                    <p class="text-gray-600 text-sm leading-relaxed">${state.selectedEvent.description}</p>
                </div>
            `;
            // Middle (Calendar)
            const calendar = `
                <div class="w-full md:w-${state.selectedDate ? '1/3' : '2/3'} p-8 transition-all duration-300">
                    <h3 class="text-lg font-bold text-gray-900 mb-6">Select a Date & Time</h3>
                    <div class="flex items-center justify-between mb-4">
                        <p class="font-medium text-gray-700">${getMonthName(state.currentMonth)} ${state.currentYear}</p>
                        <div class="flex gap-2">
                            <button onclick="changeMonth(-1)" class="p-1 hover:bg-blue-50 rounded text-blue-600 ${state.currentMonth === new Date().getMonth() ? 'opacity-50 cursor-not-allowed' : ''}">&lt;</button>
                            <button onclick="changeMonth(1)" class="p-1 hover:bg-blue-50 rounded text-blue-600">&gt;</button>
                        </div>
                    </div>
                    <div class="grid grid-cols-7 gap-1 mb-2 text-center text-xs font-medium text-gray-500 uppercase">
                        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                    </div>
                    <div class="calendar-grid" id="calendar-days">
                        ${generateCalendarDays()}
                    </div>
                </div>
            `;
            // Right (Time Slots) - Only visible if date selected
            let timeSlotsSection = '';
            if (state.selectedDate) {
                timeSlotsSection = `
                    <div class="w-full md:w-1/3 p-6 border-t md:border-t-0 md:border-l border-gray-200 h-[600px] overflow-y-auto scrollbar-hide fade-in">
                        <h3 class="text-lg font-medium text-gray-900 mb-6">${state.selectedDate.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}</h3>
                        <div class="space-y-3">
                            ${generateTimeSlots()}
                        </div>
                    </div>
                `;
            }
            wrapper.innerHTML = sidebar + calendar + timeSlotsSection;
            container.appendChild(wrapper);
        };
        const renderBookingForm = (container) => {
             const wrapper = document.createElement('div');
            wrapper.className = "bg-white rounded-lg shadow-lg border border-gray-200 w-full max-w-4xl flex flex-col md:flex-row overflow-hidden fade-in";
            
            const sidebar = `
                <div class="w-full md:w-1/3 bg-white border-b md:border-b-0 md:border-r border-gray-200 p-8">
                    <button onclick="backToCalendar()" class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center text-gray-500 hover:bg-gray-50 mb-6">
                        &larr;
                    </button>
                    <p class="text-gray-500 text-sm font-medium mb-1">Jane Doe</p>
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">${state.selectedEvent.title}</h2>
                    <div class="flex items-center text-gray-500 text-sm mb-2">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        ${state.selectedEvent.duration}
                    </div>
                    <div class="flex items-center text-gray-500 text-sm mb-6 font-semibold text-gray-700">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        ${state.selectedTime}, ${state.selectedDate.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}
                    </div>
                </div>
            `;
            const form = `
                <div class="w-full md:w-2/3 p-8">
                    <h3 class="text-lg font-bold text-gray-900 mb-6">Enter Details</h3>
                    <form onsubmit="submitBooking(event)" class="space-y-6 max-w-md">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Name *</label>
                            <input type="text" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                            <input type="email" required class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Please share anything that will help prepare for our meeting.</label>
                            <textarea class="w-full border border-gray-300 rounded-md px-3 py-2 h-24 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
                        </div>
                        <button type="submit" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-full hover:bg-blue-700 transition-colors">Schedule Event</button>
                    </form>
                </div>
            `;
            wrapper.innerHTML = sidebar + form;
            container.appendChild(wrapper);
        };
        const renderSuccess = (container) => {
             const wrapper = document.createElement('div');
            wrapper.className = "bg-white rounded-lg shadow-lg border border-gray-200 w-full max-w-2xl p-12 text-center fade-in";
            
            wrapper.innerHTML = `
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-4">Confirmed</h2>
                <p class="text-gray-600 mb-8">You are scheduled with Jane Doe.</p>
                <div class="bg-gray-50 border border-gray-200 rounded p-6 mb-8 text-left inline-block w-full max-w-md">
                    <div class="flex items-start mb-4">
                         <div class="w-3 h-3 bg-blue-500 rounded-full mt-1.5 mr-3 flex-shrink-0"></div>
                         <div>
                            <p class="font-bold text-gray-900">${state.selectedEvent.title}</p>
                            <p class="text-gray-600 mt-1">${state.selectedTime}, ${state.selectedDate.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' })}</p>
                         </div>
                    </div>
                </div>
                <div class="border-t border-gray-200 pt-8">
                    <button onclick="resetApp()" class="text-blue-600 font-medium hover:underline">Schedule another meeting</button>
                </div>
            `;
            container.appendChild(wrapper);
        };
        // Helper Functions
        function generateCalendarDays() {
            const year = state.currentYear;
            const month = state.currentMonth;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            let html = '';
            
            // Empty cells for days before start of month
            for(let i=0; i<firstDay; i++) {
                html += `<div></div>`;
            }
            
            const today = new Date();
            today.setHours(0,0,0,0);
            for(let i=1; i<=daysInMonth; i++) {
                const date = new Date(year, month, i);
                const isPast = date < today;
                const isSelected = state.selectedDate && date.getTime() === state.selectedDate.getTime();
                const isWeekend = date.getDay() === 0 || date.getDay() === 6;
                const isDisabled = isPast || isWeekend;
                
                let classes = "h-10 w-10 rounded-full flex items-center justify-center text-sm font-medium mx-auto ";
                
                if (isSelected) {
                    classes += "bg-blue-100 text-blue-700 font-bold";
                } else if (isDisabled) {
                    classes += "text-gray-300 cursor-default";
                } else {
                    classes += "text-blue-600 bg-blue-50 hover:bg-blue-100 cursor-pointer font-bold";
                }
                const onClick = isDisabled ? '' : `onclick="selectDate(${year}, ${month}, ${i})"`;
                html += `<div class="py-1"><div class="${classes}" ${onClick}>${i}</div></div>`;
            }
            return html;
        }
        function generateTimeSlots() {
            // Mock times
            const times = ["9:00am", "9:30am", "10:00am", "11:00am", "1:00pm", "2:30pm", "4:00pm"];
            
            let html = '';
            times.forEach(time => {
                html += `
                    <div class="flex group">
                        <button onclick="selectTime('${time}')" class="flex-grow border border-blue-200 text-blue-600 font-bold py-3 rounded hover:border-blue-600 hover:border-2 transition-all mb-2 w-full text-center block">${time}</button>
                        <button onclick="confirmTime('${time}')" class="hidden group-focus-within:block ml-2 bg-blue-600 text-white font-bold py-3 px-4 rounded hover:bg-blue-700 transition-colors mb-2">Confirm</button>
                    </div>
                `;
                // Simple hack for the prototype: Use a two-click system or just one click opens form?
                // Let's do standard calendly style: button expands or just select.
                // For simplicity in this v1, clicking the button goes directly to confirm form?
                // Or better, render buttons like: [ 9:00am ] -> Click -> becomes [ 9:00am ] [ Confirm ]
            });
            
            // Let's simplify: One click selects time and goes to form for this demo, unless I build the expansion logic.
            // The expansion logic is nice. Let's try a simpler version first: Click = go to form.
            
            return times.map(time => `
                <button onclick="confirmTime('${time}')" class="w-full border border-blue-200 text-blue-600 font-bold py-3 rounded hover:border-blue-600 hover:bg-blue-50 transition-all">${time}</button>
            `).join('');
        }
        // Actions
        window.resetApp = () => {
            state.view = 'event-types';
            state.selectedEvent = null;
            state.selectedDate = null;
            state.selectedTime = null;
            renderApp();
        };
        window.selectEvent = (id) => {
            state.selectedEvent = eventTypes.find(e => e.id === id);
            state.view = 'calendar';
            state.selectedDate = null; // Reset date when re-entering
            renderApp();
        };
        window.changeMonth = (delta) => {
            let newMonth = state.currentMonth + delta;
            if (newMonth < 0) {
                state.currentMonth = 11;
                state.currentYear--;
            } else if (newMonth > 11) {
                state.currentMonth = 0;
                state.currentYear++;
            } else {
                state.currentMonth = newMonth;
            }
            // Prevent going back past current month/year
            const now = new Date();
            if (state.currentYear < now.getFullYear() || (state.currentYear === now.getFullYear() && state.currentMonth < now.getMonth())) {
                 state.currentMonth = now.getMonth();
                 state.currentYear = now.getFullYear();
            }
            
            renderApp(); // Re-render to update calendar grid
        };
        window.selectDate = (year, month, day) => {
            state.selectedDate = new Date(year, month, day);
            renderApp(); // Re-render to show time slots
        };
        window.selectTime = (time) => {
            // This would support the expansion logic if implemented
        };
        window.confirmTime = (time) => {
            state.selectedTime = time;
            state.view = 'form';
            renderApp();
        };
        window.backToCalendar = () => {
            state.view = 'calendar';
            renderApp();
        };
        window.submitBooking = (e) => {
            e.preventDefault();
            state.view = 'success';
            renderApp();
        };
        // Initial Render
        renderApp();
    </script>
</body>
</html>
